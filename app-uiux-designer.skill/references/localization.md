# 國際化設計指南 (i18n/L10n)

## 基本概念

### 定義
| 術語 | 說明 |
|------|------|
| **i18n** | Internationalization，國際化架構 |
| **L10n** | Localization，在地化內容 |
| **Locale** | 語言+地區 (zh-TW, en-US) |

---

## 文字設計

### 文字展開預留
| 原始語言 | 目標語言 | 展開比例 |
|----------|----------|----------|
| 中文 | 英文 | +50~80% |
| 英文 | 德文 | +30~50% |
| 英文 | 法文 | +20~30% |
| 英文 | 中文/日文 | -30~50% |

### UI 空間策略
```
✅ 使用:
├── 彈性寬度容器
├── 文字可換行
├── 可伸縮間距
└── min/max 寬度限制

❌ 避免:
├── 固定寬度按鈕
├── 固定高度容器
├── 依賴特定字數斷行
```

### 字型 Fallback
```css
font-family:
  -apple-system,           /* Apple */
  BlinkMacSystemFont,      /* Chrome Mac */
  "Segoe UI",              /* Windows */
  "Noto Sans TC",          /* 繁中 */
  "Noto Sans SC",          /* 簡中 */
  "Noto Sans JP",          /* 日文 */
  "Noto Sans KR",          /* 韓文 */
  sans-serif;
```

---

## RTL 支援

### RTL 語言
```
阿拉伯文 (ar)
希伯來文 (he)
波斯文 (fa)
烏爾都文 (ur)
```

### 佈局鏡像
```
LTR                    RTL
┌──────────────┐      ┌──────────────┐
│ ← Logo [Menu]│      │[Menu] Logo → │
├──────────────┤      ├──────────────┤
│ [◀] Title    │      │    Title [▶] │
│ Content...   │      │   ...Content │
│ [Btn1] [Btn2]│      │ [Btn2] [Btn1]│
└──────────────┘      └──────────────┘
```

### CSS 實作
```css
/* 使用邏輯屬性 */
.element {
  margin-inline-start: 16px;  /* 取代 margin-left */
  padding-inline-end: 8px;    /* 取代 padding-right */
  text-align: start;          /* 取代 left */
}

/* RTL 特定調整 */
[dir="rtl"] .icon-arrow {
  transform: scaleX(-1);      /* 箭頭翻轉 */
}
```

### 不需鏡像
```
✓ Logo/品牌元素
✓ 媒體播放控制 (◀ ▶)
✓ 數字/電話號碼
✓ 時間顯示
✓ 圖表方向
```

---

## 格式化

### 日期時間
| 地區 | 日期格式 | 時間格式 |
|------|----------|----------|
| 台灣 | 2024/01/15 | 下午 3:30 |
| 美國 | 01/15/2024 | 3:30 PM |
| 英國 | 15/01/2024 | 15:30 |
| 德國 | 15.01.2024 | 15:30 |
| 日本 | 2024年1月15日 | 15:30 |

### 數字格式
| 地區 | 千位分隔 | 小數點 | 範例 |
|------|----------|--------|------|
| 台灣/美國 | , | . | 1,234.56 |
| 德國/法國 | . | , | 1.234,56 |

### 貨幣
| 地區 | 格式 | 範例 |
|------|------|------|
| 台灣 | NT$ + 數字 | NT$1,234 |
| 美國 | $ + 數字 | $1,234.00 |
| 歐盟 | 數字 + € | 1.234,00 € |
| 日本 | ¥ + 數字 | ¥1,234 |

### 地址格式
```
台灣: 郵遞區號 縣市 區 路 段 巷 弄 號 樓
美國: Street, City, State ZIP
日本: 郵遞區號 都道府縣 市區町村 番地
```

---

## 文化考量

### 顏色意義
| 顏色 | 西方 | 中國 | 其他 |
|------|------|------|------|
| 紅色 | 危險/停止 | 喜慶/好運 | 依文化 |
| 白色 | 純潔 | 喪事 | 依文化 |
| 綠色 | 成功/環保 | 同左 | 伊斯蘭聖色 |

### 圖像使用
```
✅ 建議:
├── 使用當地人物形象
├── 適合當地場景
├── 中性手勢
└── 多元包容

❌ 避免:
├── 宗教敏感符號
├── 政治地圖爭議
├── 單一種族形象
└── 特定文化禁忌手勢
```

### 節日/假期
```
設計日曆/活動功能時注意:
├── 農曆 (中港台越韓)
├── 伊斯蘭曆 (中東)
├── 各國國定假日不同
└── 週末定義不同 (中東: 週五六)
```

---

## 實作策略

### 文字外部化
```javascript
// ❌ 硬編碼
<button>送出</button>

// ✅ 外部化
<button>{t('common.submit')}</button>

// JSON 語言檔
// zh-TW.json
{ "common": { "submit": "送出" } }
// en.json
{ "common": { "submit": "Submit" } }
```

### 複數處理
```javascript
// 英文複數規則
{
  "items": {
    "one": "{{count}} item",
    "other": "{{count}} items"
  }
}

// 俄文有更複雜的複數規則 (one, few, many, other)
```

### 變數插入
```javascript
// 正確: 使用變數
t('greeting', { name: 'Alice' })
"greeting": "Hello, {{name}}!"

// 錯誤: 拼接字串 (語序不同語言會錯)
`Hello, ${name}!`
```

---

## 測試清單

### 視覺測試
```
□ 長文字不溢出
□ 按鈕文字不截斷
□ 表單標籤對齊
□ RTL 佈局正確
□ 字型正確載入
□ 特殊字元顯示
```

### 功能測試
```
□ 日期格式正確
□ 貨幣格式正確
□ 數字格式正確
□ 時區處理正確
□ 語言切換正常
□ 複數規則正確
```

### Pseudo-localization
```
用假翻譯測試:
├── 加長文字 [Śübmït →→]
├── 加入特殊字元 àáâãäå
├── 測試 RTL ‏[Submit]
└── 找出硬編碼文字
```

---

## Token 輸出

### 語言檔結構
```
📁 locales/
├── 📁 zh-TW/
│   ├── common.json
│   ├── auth.json
│   └── errors.json
├── 📁 en/
│   └── ...
└── 📁 ja/
    └── ...
```

### 日期/數字格式 Token
```json
{
  "formats": {
    "date": {
      "short": "yyyy/MM/dd",
      "long": "yyyy年M月d日"
    },
    "number": {
      "decimal": ".",
      "thousand": ","
    },
    "currency": {
      "symbol": "NT$",
      "position": "before"
    }
  }
}
```
