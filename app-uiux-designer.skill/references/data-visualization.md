# 數據視覺化設計指南

## 圖表選擇

### 依數據類型選圖表
| 目的 | 推薦圖表 | 說明 |
|------|----------|------|
| **比較** | 長條圖、雷達圖 | 比較不同項目數值 |
| **趨勢** | 折線圖、面積圖 | 時間序列變化 |
| **佔比** | 圓餅圖、環形圖、Treemap | 部分與整體 |
| **分布** | 直方圖、散佈圖、箱型圖 | 數據分布 |
| **關係** | 散佈圖、氣泡圖 | 變數相關性 |
| **流程** | Sankey、漏斗圖 | 流向與轉換 |
| **地理** | 地圖、熱力圖 | 位置數據 |

### 快速選擇指南
```
"隨時間變化" → 折線圖
"各項佔比" → 圓餅/環形 (≤6項)
"項目比較" → 長條圖
"兩變數關係" → 散佈圖
"排名" → 水平長條
"KPI/單一指標" → 大數字卡
```

---

## 圖表設計規範

### 顏色使用
```
單一系列: 品牌主色
多系列: 色相區分，保持飽和度一致
順序數據: 單色深淺漸層
發散數據: 雙色漸層 (紅-白-綠)
語義色: 紅=負面, 綠=正面 (注意色盲)

色盲友善:
├── 避免紅綠對比
├── 加入圖案/紋理
└── 提供圖例標籤
```

### 調色盤 (範例)
```
類別色 (最多 6-8 色):
#3366CC #DC3912 #FF9900 #109618 #990099 #0099C6

順序色 (低→高):
#E3F2FD #90CAF9 #42A5F5 #1E88E5 #1565C0 #0D47A1

發散色 (負→中→正):
#D32F2F #FFCDD2 #FFFFFF #C8E6C9 #388E3C
```

### 軸與格線
```
✅ 要:
├── Y 軸從 0 開始 (長條圖)
├── 網格線淡化 (#E0E0E0)
├── 軸標籤清晰可讀
└── 適當的刻度間隔

❌ 避免:
├── 截斷 Y 軸誤導
├── 過多網格線
├── 3D 效果 (扭曲比例)
└── 旋轉超過 45° 的標籤
```

---

## Dashboard 佈局

### 佈局模式
```
┌─────────────────────────────────┐
│ KPI Card  KPI Card  KPI Card    │ ← 關鍵指標
├───────────────────┬─────────────┤
│                   │             │
│   主要圖表        │  次要圖表   │
│   (大)           │  (中)       │
│                   │             │
├───────────────────┴─────────────┤
│         數據表格 / 明細          │
└─────────────────────────────────┘
```

### KPI 卡片設計
```
┌──────────────────┐
│ 月營收            │ ← 指標名稱
│ $1,234,567       │ ← 主要數值 (大)
│ ▲ 12.5% vs 上月  │ ← 變化趨勢
│ ───────────      │ ← 迷你圖 (選配)
└──────────────────┘
```

### 資訊層級
```
Level 1: 概覽 (KPI、關鍵圖表)
         └─ 回答: "整體狀況如何?"

Level 2: 分析 (詳細圖表、篩選)
         └─ 回答: "為什麼是這樣?"

Level 3: 明細 (數據表、匯出)
         └─ 回答: "具體數據是什麼?"
```

---

## 互動設計

### 常見互動
| 互動 | 功能 | 觸發 |
|------|------|------|
| Hover | 顯示 Tooltip | 滑鼠移入 |
| Click | 篩選/鑽取 | 點擊元素 |
| Brush | 範圍選擇 | 拖曳選取 |
| Zoom | 縮放檢視 | 滾輪/手勢 |
| Pan | 平移畫布 | 拖曳 |

### Tooltip 設計
```
┌────────────────────┐
│ 2024/01           │ ← 維度
│ ─────────────────  │
│ 營收: $45,678     │ ← 數值 (格式化)
│ 訂單: 1,234 筆    │
│ ▲ +15% vs 上月    │ ← 比較 (選配)
└────────────────────┘

原則:
├── 接近滑鼠但不遮擋
├── 數值有單位
├── 保持簡潔
```

---

## 響應式圖表

### 策略
| 尺寸 | 調整 |
|------|------|
| Desktop | 完整圖表，詳細軸標籤 |
| Tablet | 簡化標籤，可能隱藏圖例 |
| Mobile | 改用直式，或簡化圖表類型 |

### Mobile 優化
```
Desktop 多系列折線 → Mobile 單系列+切換
Desktop 並排圖表 → Mobile 垂直堆疊
Desktop 複雜表格 → Mobile 卡片列表
Desktop 大圖例 → Mobile 可收合圖例
```

---

## 無障礙

### 必要措施
```
✅ 不只依賴顏色區分 (加圖案/標籤)
✅ 對比度 ≥ 3:1
✅ 提供文字替代說明
✅ 支援鍵盤導航
✅ 圖表有 alt text
✅ 數據可匯出為表格
```

### 圖表 alt text 範例
```html
<figure role="img" aria-label="2024年月營收趨勢:
  1月 $100K, 2月 $120K, 3月 $95K, 整體上升趨勢">
  <canvas id="chart"></canvas>
</figure>
```

---

## 程式碼輸出

### Chart.js (Web)
```javascript
const config = {
  type: 'line',
  data: {
    labels: ['Jan', 'Feb', 'Mar'],
    datasets: [{
      label: '營收',
      data: [100, 120, 95],
      borderColor: '#3366CC',
      tension: 0.3
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { position: 'top' }
    }
  }
};
```

### SwiftUI Charts
```swift
Chart {
  ForEach(data) { item in
    LineMark(
      x: .value("月份", item.month),
      y: .value("營收", item.revenue)
    )
    .foregroundStyle(.blue)
  }
}
.chartYAxis {
  AxisMarks(position: .leading)
}
```

### Compose Charts
```kotlin
LineChart(
  data = listOf(
    DataPoint(1f, 100f),
    DataPoint(2f, 120f),
    DataPoint(3f, 95f)
  ),
  lineColor = MaterialTheme.colorScheme.primary
)
```

---

## 檢查清單

```
設計:
□ 選擇適合數據的圖表類型
□ 顏色對比符合無障礙
□ Y 軸從 0 開始 (需要時)
□ 標籤清晰可讀
□ 提供圖例或直接標註
□ 響應式適配

互動:
□ Tooltip 顯示完整資訊
□ 可篩選/鑽取
□ 支援鍵盤操作

數據:
□ 數值有正確格式
□ 顯示數據更新時間
□ 提供數據來源
□ 可匯出原始數據
```
