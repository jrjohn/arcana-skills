# 整合工作流程參考 (10 步驟)

## 完整流程圖

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        App 開發文件產出流程                               │
│                    (app-requirements-skill 主導)                         │
└─────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════
Phase 1: 需求階段
═══════════════════════════════════════════════════════════════════════════
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 1: 撰寫 SRS 軟體需求規格書                                           │
│ ───────────────────────────────────────────────────────────────────── │
│ • 專案願景訪談、利害關係人分析                                            │
│ • UI 需求收集（平台/裝置/模組選擇/視覺風格）                               │
│ • 功能/非功能需求收集                                                    │
│ • 產出: SRS-{Project}-1.0.md                                           │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
═══════════════════════════════════════════════════════════════════════════
Phase 2: 設計階段 (SDD + 智慧預測一體化) ⚠️ 關鍵
═══════════════════════════════════════════════════════════════════════════
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 2: 撰寫 SDD 軟體設計規格書                                           │
│ ───────────────────────────────────────────────────────────────────── │
│ • 系統架構設計、資料模型設計                                              │
│ • 基礎畫面 SCR-* 設計 (含 Button Navigation)                             │
│ • 產出: SDD-{Project}-1.0.md (初版)                                     │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 3: 補充設定子頁面設計                                                │
│ ───────────────────────────────────────────────────────────────────── │
│ • 設定主頁 (SCR-SETTING-001-main)                                       │
│ • 設定子頁面（帳戶、通知、隱私、語言、主題、關於等）                       │
│ • 每個子頁面必須包含完整 Button Navigation                               │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 4: 執行智慧預測找出遺漏畫面 🤖                                       │
│ ───────────────────────────────────────────────────────────────────── │
│ • 分析 Button Navigation 找出導航缺口                                    │
│ • 識別缺少的詳情頁、編輯頁、確認頁                                        │
│ • 識別共用狀態畫面（loading/empty/error/no-network）                     │
│ • 產出: 04-ui-flow/workspace/screen-prediction.json                     │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 5: 補充預測畫面設計                                                  │
│ ───────────────────────────────────────────────────────────────────── │
│ • 將預測畫面補充至 SDD                                                   │
│ • 確保 Button Navigation 100% 完整                                      │
│ • 更新 SDD.md                                                          │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 6: 列出畫面清單                                                      │
│ ───────────────────────────────────────────────────────────────────── │
│ • 更新 Appendix A 完整畫面清單                                           │
│ • 驗證所有導航目標都有對應畫面                                            │
│ • 確認畫面總數正確                                                       │
│ • 產出: SDD-{Project}-1.0.md (完整版)                                   │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                    ⚠️ 阻斷點: 必須完成才能繼續
                                    ↓
═══════════════════════════════════════════════════════════════════════════
Phase 3: UI Flow 階段 ⚠️ 一律使用 app-uiux-designer.skill
═══════════════════════════════════════════════════════════════════════════
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 7: UI Flow 框架初始化                                                │
│ ───────────────────────────────────────────────────────────────────── │
│ • 建立 04-ui-flow/ 目錄結構                                              │
│ • 複製模板、設定專案變數                                                  │
│ • 建立 workspace/current-process.json                                   │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 8: 產出完整 UI Flow HTML 畫面 (一律使用 app-uiux-designer.skill)      │
│ ───────────────────────────────────────────────────────────────────── │
│ • 依據 SDD Button Navigation 產生所有畫面                                │
│ • 產出 iPad 版本 (04-ui-flow/ipad/*.html)                               │
│ • 產出 iPhone 版本 (04-ui-flow/iphone/*.html)                           │
│ • 100% 畫面覆蓋 + 導航驗證                                               │
│ • 產出截圖 (screenshots/ipad/*.png, screenshots/iphone/*.png)           │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 9: 回填 SDD (一律使用 app-uiux-designer.skill)                       │
│ ───────────────────────────────────────────────────────────────────── │
│ • 各 SCR-* 區塊加入 UI 原型參考                                          │
│ • 嵌入 images/ipad/*.png                                                │
│ • 嵌入 images/iphone/*.png                                              │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
═══════════════════════════════════════════════════════════════════════════
Phase 4: 文件完成階段 (一次到位)
═══════════════════════════════════════════════════════════════════════════
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 10: 產出 DOCX 格式文件 (最終版)                                       │
│ ───────────────────────────────────────────────────────────────────── │
│ • node md-to-docx.js SRS-*.md → SRS.docx                                │
│ • node md-to-docx.js SDD-*.md → SDD.docx                                │
│ • 一次產生，避免重複                                                     │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
                            ✅ 文件產出完成
```

---

## 流程對照表 (10 步驟)

| Step | 步驟名稱 | 主導 Skill | 輸出檔案 |
|------|---------|-----------|----------|
| 1 | 撰寫 SRS 軟體需求規格書 | app-requirements-skill | SRS-*.md |
| 2 | 撰寫 SDD 軟體設計規格書 | app-requirements-skill | SDD-*.md (初版) |
| 3 | 補充設定子頁面設計 | app-requirements-skill | SDD-*.md (更新) |
| 4 | 執行智慧預測找出遺漏畫面 | app-requirements-skill | screen-prediction.json |
| 5 | 補充預測畫面設計 | app-requirements-skill | SDD-*.md (更新) |
| 6 | 列出畫面清單 | app-requirements-skill | SDD-*.md (完整版) |
| 7 | UI Flow 框架初始化 | **app-uiux-designer.skill** | workspace/ |
| 8 | 產出完整 UI Flow HTML 畫面 | **app-uiux-designer.skill** | ipad/*.html, iphone/*.html, screenshots/*.png |
| 9 | 回填 SDD | **app-uiux-designer.skill** | SDD-*.md (含截圖) |
| 10 | 產出 DOCX 格式文件 | app-requirements-skill | SRS-*.docx, SDD-*.docx |

---

## 阻斷點清單

| 階段 | 阻斷條件 | 驗證方式 |
|------|----------|----------|
| Step 6 → 7 | 畫面清單完成 | Appendix A 畫面數量正確 |
| Step 8 (驗證) | 100% 導航覆蓋 | validate-navigation.js 通過 |
| Step 8 (驗證) | 0 空按鈕 | 無 onclick="" |
| Step 8 (驗證) | 0 alert 佔位符 | 無 onclick="alert(...)" |

---

## 關鍵改進

| 項目 | 舊流程 | 新流程 |
|------|--------|--------|
| 設定子頁面 | 遺漏或事後補充 | **Step 3 獨立步驟處理** |
| 智慧預測時機 | SDD 撰寫後才預測 | **Step 4 立即執行預測** |
| 子頁面補充 | 手動發現、多次補 | **Step 5 自動預測一次到位** |
| 畫面清單確認 | 流程中段 | **Step 6 UI Flow 前確認** |
| UI Flow + 回填 | 分散處理 | **Step 7~9 一律使用 app-uiux-designer.skill** |
| DOCX 產生 | 多次產生 | **Step 10 最後一次產生** |

---

## 驗證清單

### Phase 2 完成驗證 (Step 2~6)
- [ ] SDD.md 包含所有畫面設計
- [ ] Step 3 設定子頁面已補充完整
- [ ] 每個 SCR-* 都有 Button Navigation 表格
- [ ] Step 4 screen-prediction.json 已產出
- [ ] Step 6 Appendix A 畫面數量正確

### Phase 3 完成驗證 (Step 7~9) - 一律使用 app-uiux-designer.skill
- [ ] Step 7 workspace/ 目錄已建立
- [ ] Step 8 所有畫面 HTML 已產生 (ipad/ + iphone/)
- [ ] Step 8 validate-navigation.js 通過
- [ ] Step 8 截圖已產生 (screenshots/)
- [ ] Step 9 SDD.md 所有 SCR-* 已嵌入截圖

### Phase 4 完成驗證 (Step 10)
- [ ] Step 10 SRS.docx 已產生
- [ ] Step 10 SDD.docx 已產生
